/*!
 @Name：layer mobile v2.0 弹层组件移动版
 @Author：贤心
 @License：LGPL
 */
!function(e){"use strict";var t,i,n,s,l,a=document,r="getElementsByClassName",o=function(e){return a.querySelectorAll(e)},d={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},c={extend:function(e){var t=JSON.parse(JSON.stringify(d));for(var i in e)t[i]=e[i];return t},timer:{},end:{},touch:function(e,t){e.addEventListener("click",(function(e){t.call(this,e)}),!1)}},y=0,u=["layui-m-layer"],m=function(e){this.config=c.extend(e),this.view()};m.prototype.view=function(){var e=this,t=e.config,i=a.createElement("div");e.id=i.id=u[0]+y,i.setAttribute("class",u[0]+" "+u[0]+(t.type||0)),i.setAttribute("index",y);var n,s=(n="object"==typeof t.title,t.title?'<h3 style="'+(n?t.title[1]:"")+'">'+(n?t.title[0]:t.title)+"</h3>":""),l=function(){"string"==typeof t.btn&&(t.btn=[t.btn]);var e,i=(t.btn||[]).length;return 0!==i&&t.btn?(e='<span yes type="1">'+t.btn[0]+"</span>",2===i&&(e='<span no type="0">'+t.btn[1]+"</span>"+e),'<div class="layui-m-layerbtn">'+e+"</div>"):""}();if(t.fixed||(t.top=t.hasOwnProperty("top")?t.top:100,t.style=t.style||"",t.style+=" top:"+(a.body.scrollTop+t.top)+"px"),2===t.type&&(t.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(t.content||"")+"</p>"),t.skin&&(t.anim="up"),"msg"===t.skin&&(t.shade=!1),i.innerHTML=(t.shade?"<div "+("string"==typeof t.shade?'style="'+t.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(t.fixed?"":'style="position:static;"')+'><div class="layui-m-layersection"><div class="layui-m-layerchild '+(t.skin?"layui-m-layer-"+t.skin+" ":"")+(t.className?t.className:"")+" "+(t.anim?"layui-m-anim-"+t.anim:"")+'" '+(t.style?'style="'+t.style+'"':"")+">"+s+'<div class="layui-m-layercont">'+t.content+"</div>"+l+"</div></div></div>",!t.type||2===t.type){var d=a[r](u[0]+t.type);d.length>=1&&layer.close(d[0].getAttribute("index"))}document.body.appendChild(i);var c=e.elem=o("#"+e.id)[0];t.success&&t.success(c),e.index=y++,e.action(t,c)},m.prototype.action=function(e,t){var i=this;e.time&&(c.timer[i.index]=setTimeout((function(){layer.close(i.index)}),1e3*e.time));var n=function(){0==this.getAttribute("type")?(e.no&&e.no(),layer.close(i.index)):e.yes?e.yes(i.index):layer.close(i.index)};if(e.btn)for(var s=t[r]("layui-m-layerbtn")[0].children,l=s.length,a=0;a<l;a++)c.touch(s[a],n);if(e.shade&&e.shadeClose){var o=t[r]("layui-m-layershade")[0];c.touch(o,(function(){layer.close(i.index,e.end)}))}e.end&&(c.end[i.index]=e.end)},e.layer={v:"2.0",index:y,open:function(e){return new m(e||{}).index},close:function(e){var t=o("#"+u[0]+e)[0];t&&(t.innerHTML="",a.body.removeChild(t),clearTimeout(c.timer[e]),delete c.timer[e],"function"==typeof c.end[e]&&c.end[e](),delete c.end[e])},closeAll:function(){for(var e=a[r](u[0]),t=0,i=e.length;t<i;t++)layer.close(0|e[0].getAttribute("index"))}},"function"==typeof define?define((function(){return layer})):(i=document.scripts,n=i[i.length-1],s=n.src,l=s.substring(0,s.lastIndexOf("/")+1),n.getAttribute("merge")||document.head.appendChild(((t=a.createElement("link"))["data-src"]=l+"need/layer.css?2.0",t.href="//i.mazey.net/lib/layer/mobile/need/layer.css?2.0",t.type="text/css",t.rel="styleSheet",t.id="layermcss",t)))}(window);